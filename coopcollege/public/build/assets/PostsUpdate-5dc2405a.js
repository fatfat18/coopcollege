import{A as w,c as x,w as h,o as r,b as s,e as y,f as d,m as c,F as u,a as m,h as g,i as v,q as _,t as P,d as U}from"./app-e0a08b5f.js";import{_ as b}from"./AuthenticatedLayout-8b5b1677.js";import{_ as f}from"./TextInput-d367c21e.js";import{_ as I}from"./Modal-a6baa50a.js";import{B as p}from"./baseurl-1d759a51.js";import"./index-3bfab0f6.js";const C=s("h2",{class:"font-semibold text-3xl text-theme1 leading-tight h-4 mb-4"}," Post Editor ",-1),S=s("div",{class:""},null,-1),V={class:"postcontainer flex justify-center h-max w-screen xl:px-10 xl:pb-96 py-20 overflow-y-hidden"},M={class:"xl:w-3/4 w-4/5 h-max xl:mt-4"},D=s("button",{class:"mt-16 border border-white w-24 text-white py-2 px-4 bg-green-800 rounded-lg mb-10 hover:bg-green-600 transition ease-in duration-100"}," Save ",-1),T={class:"text-white xl:h-20 w-max flex justify-center items-center","data-aos":"fade-up","data-aos-duration":"1500"},k=s("label",{for:"img",class:"text-2xl text-white rounded-2xl border-theme2 py-5 px-5 border-dashed border-2 hover:border-white hover:text-theme2 transiton duration-300"},[U("Upload Images"),s("br")],-1),B={class:"text-white flex","data-aos":"fade-up","data-aos-duration":"1500"},F=["src"],$={class:"overflow-y-hidden"},N=s("option",{hidden:""},"Post Type",-1),j=["value"],q=s("h2",{class:"text-theme1 text-2xl"},"Update Post",-1),A=s("p",{class:"text-theme2 text-4xl mb-5"},"Success!",-1),E={data(){return{imagePreviewUrl:[],imagePreviewUrlholder:[],posttype:"",idUser:1,description:"",title:"",context:"",items:[],category:[],selectedItem:this.itemId,showModal:!1}},mounted(a){axios.get(p+"/displayPost").then(t=>{const e=window.location.pathname.split("/");this.itemId=e[e.length-1],console.log(this.itemId);const l=parseInt(this.itemId);console.log(l),this.items=t.data,console.log(this.items);for(let i=0;i<this.items.length;i++){const n=this.items[i];n.Postid==this.itemId&&(console.log(n),this.items=n,console.log(this.items))}axios.get(p+"/postCategory").then(i=>{this.category=i.data}).catch(i=>{console.log(i)});for(let i=0;i<this.items.image.length;i++)this.imagePreviewUrlholder[i]=this.items.image[i].ImageUrl;console.log(this.imagePreviewUrlholder),this.description=this.items.Description,this.title=this.items.newsTitle,this.context=this.items.Context,this.posttype=this.items.PostCatId}).catch(t=>{})},methods:{uploadFile(a){console.log(this.imagePreviewUrlholder);const t=a.target.files;for(let e=0;e<t.length;e++){const l=t[e],i=new FileReader;i.onload=n=>{this.imagePreviewUrlholder.push(n.target.result)},i.readAsDataURL(l)}const o=this.$refs.file.files;for(let e=0;e<o.length;e++){const l=o[e];this.imagePreviewUrl.push(l)}console.log(this.imagePreviewUrl)},closeModal(){this.showModal=!1},updatePosts(){let a=new URLSearchParams,t=parseInt(this.itemId);a.append("PostCatId",this.posttype),a.append("idUser",this.idUser),a.append("Description",this.description),a.append("newsTitle",this.title),a.append("Context",this.context),a.append("Postid",t),axios.put(p+"/updateCategory?"+a.toString()).then(o=>{console.log(o.data),this.showModal=!0;async function e(){await new Promise(l=>setTimeout(l,1e3)),window.location.href=route("Posts")}e()}).catch(o=>{console.log(o)}),console.log(p+"/updateCategory?"+a.toString())}}};w.init({startEvent:"load",once:"true,"});w.refresh();const H=Object.assign(E,{__name:"PostsUpdate",setup(a){return(t,o)=>(r(),x(b,null,{header:h(()=>[C]),default:h(()=>[S,s("div",V,[s("div",M,[s("form",{onSubmit:o[6]||(o[6]=y(e=>t.updatePosts(t.intNum),["prevent"]))},[D,s("div",T,[k,s("input",{type:"file",accept:"image/*",multiple:"",onChange:o[0]||(o[0]=(...e)=>t.uploadFile&&t.uploadFile(...e)),id:"img",ref:"file"},null,544)]),s("div",B,[(r(!0),d(u,null,c(t.imagePreviewUrlholder,e=>(r(),d("div",{key:e},[s("img",{src:e,class:"h-32 w-40 object-cover my-5 mx-5"},null,8,F)]))),128))]),s("div",$,[m(f,{id:"title",name:"title",type:"text",class:"mt-4 py-2 px-2 w-full focus:ring-yellow-500 active:ring-yellow-500",required:"",autocomplete:"current-title",placeholder:"Title",modelValue:t.title,"onUpdate:modelValue":o[1]||(o[1]=e=>t.title=e),"data-aos":"fade-up","data-aos-duration":"1300"},null,8,["modelValue"]),m(f,{id:"description",name:"description",type:"text",class:"mt-2 py-2 px-2 w-full focus:ring-yellow-500 active:ring-yellow-500",required:"",autocomplete:"current-description",placeholder:"Description",modelValue:t.description,"onUpdate:modelValue":o[2]||(o[2]=e=>t.description=e),"data-aos":"fade-up","data-aos-duration":"1000"},null,8,["modelValue"]),g(s("textarea",{id:"context",name:"context",type:"text",class:"mt-2 h-72 py-2 px-2 block w-full rounded-lg focus:ring-yellow-500 active:ring-yellow-500",required:"",autocomplete:"current-Context",placeholder:"Context","onUpdate:modelValue":o[3]||(o[3]=e=>t.context=e),"data-aos":"fade-up","data-aos-duration":"1000"},`
                        `,512),[[v,t.context]]),g(s("select",{class:"mt-4","onUpdate:modelValue":o[4]||(o[4]=e=>t.posttype=e),name:"posttype"},[N,(r(!0),d(u,null,c(t.category,e=>(r(),d("option",{key:e.postCatId,value:e.PostCatId},P(e.category),9,j))),128))],512),[[_,t.posttype]])]),m(I,{show:t.showModal,onClose:o[5]||(o[5]=e=>t.showModal=!1)},{default:h(()=>[q,A]),_:1},8,["show"])],32)])])]),_:1}))}});export{H as default};
