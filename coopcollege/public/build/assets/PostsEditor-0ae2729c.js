import{A as w,c as x,w as n,o as a,b as s,e as y,f as l,m,F as u,a as d,h,i as v,q as _,t as b,d as P}from"./app-5e558d24.js";import{_ as U}from"./AuthenticatedLayout-92860456.js";import{_ as c}from"./TextInput-5f04a848.js";import{_ as C}from"./Modal-0e1142c4.js";import{B as f}from"./baseurl-66277324.js";import"./index-9c0cfeef.js";const D=s("h2",{class:"font-semibold text-3xl text-theme1 leading-tight h-4 mb-4"},"Post Editor ",-1),V=s("div",{class:""},null,-1),M={class:"postcontainer flex justify-center h-max w-screen xl:px-10 xl:pb-96 py-20 overflow-y-hidden"},k={class:"xl:w-3/4 w-4/5 h-max xl:mt-4"},F=s("button",{class:"mt-16 border border-white w-24 text-white py-2 px-4 bg-green-800 rounded-lg mb-10 hover:bg-green-600 transition ease-in duration-100"},"Save",-1),S={class:"text-white xl:h-20 w-max flex justify-center items-center","data-aos":"fade-up","data-aos-duration":"1500"},T=s("label",{for:"img",class:"text-2xl text-white rounded-2xl border-theme2 py-5 px-5 border-dashed border-2 hover:border-white hover:text-theme2 transiton duration-300"},[P("Upload Images"),s("br")],-1),B={class:"text-white flex","data-aos":"fade-up","data-aos-duration":"1500"},E=["src"],$={class:"overflow-y-hidden"},q=s("option",{hidden:""},"Post Type",-1),A=["value"],j=s("h2",{class:"text-theme1 text-2xl"},"Added Post",-1),I=s("p",{class:"text-theme2 text-4xl mb-5"},"Success!",-1),L={data(){return{imagePreviewUrl:[],imagePreviewUrlholder:[],posttype:null,idUser:1,description:"",title:"",context:"",items:[],showModal:!1}},mounted(){axios.get(f+"/postCategory").then(i=>{this.items=i.data}).catch(i=>{console.log(i)})},methods:{uploadFile(i){console.log(this.imagePreviewUrlholder);const t=i.target.files;for(let e=0;e<t.length;e++){const r=t[e],p=new FileReader;p.onload=g=>{this.imagePreviewUrlholder.push(g.target.result)},p.readAsDataURL(r)}const o=this.$refs.file.files;for(let e=0;e<o.length;e++){const r=o[e];this.imagePreviewUrl.push(r)}console.log(this.imagePreviewUrl)},submitData(){const i=new FormData;for(let t=0;t<this.imagePreviewUrl.length;t++){const o=`file[${t}]`;i.append(o,this.imagePreviewUrl[t])}i.append("PostCatId",this.posttype),i.append("idUser",this.idUser),i.append("Description",this.description),i.append("newsTitle",this.title),i.append("Context",this.context),axios.post(f+"/storePost",i,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{console.log(t),this.showModal=!0;async function o(){await new Promise(e=>setTimeout(e,1e3)),window.location.href=route("Posts")}o()}).catch(t=>{console.log(t)}),this.imagePreviewUrl="",this.imagePreviewUrlholder="",this.posttype="",this.idUser=1,this.description="",this.title="",this.context="",this.date_created=""},closeModal(){this.showModal=!1}}};w.init({startEvent:"load",once:"true,"});w.refresh();const H=Object.assign(L,{__name:"PostsEditor",setup(i){return(t,o)=>(a(),x(U,null,{header:n(()=>[D]),default:n(()=>[V,s("div",M,[s("div",k,[s("form",{onSubmit:o[6]||(o[6]=y((...e)=>t.submitData&&t.submitData(...e),["prevent"]))},[F,s("div",S,[T,s("input",{type:"file",accept:"image/*",multiple:"",onChange:o[0]||(o[0]=(...e)=>t.uploadFile&&t.uploadFile(...e)),id:"img",ref:"file",required:""},null,544)]),s("div",B,[(a(!0),l(u,null,m(t.imagePreviewUrlholder,e=>(a(),l("div",{key:e},[s("img",{src:e,class:"h-32 w-40 object-cover my-5 mx-5"},null,8,E)]))),128))]),s("div",$,[d(c,{id:"title",name:"title",type:"text",class:"mt-4 py-2 px-2 w-full focus:ring-yellow-500 active:ring-yellow-500",required:"",autocomplete:"current-title",placeholder:"Title",modelValue:t.title,"onUpdate:modelValue":o[1]||(o[1]=e=>t.title=e),"data-aos":"fade-up","data-aos-duration":"1300"},null,8,["modelValue"]),d(c,{id:"description",name:"description",type:"text",class:"mt-2 py-2 px-2 w-full focus:ring-yellow-500 active:ring-yellow-500",required:"",autocomplete:"current-description",placeholder:"Description",modelValue:t.description,"onUpdate:modelValue":o[2]||(o[2]=e=>t.description=e),"data-aos":"fade-up","data-aos-duration":"1000"},null,8,["modelValue"]),h(s("textarea",{id:"context",name:"context",type:"text",class:"mt-2 h-72 py-2 px-2 block w-full rounded-lg focus:ring-yellow-500 active:ring-yellow-500",required:"",autocomplete:"current-Context",placeholder:"Context","onUpdate:modelValue":o[3]||(o[3]=e=>t.context=e),"data-aos":"fade-up","data-aos-duration":"1000"},`
                            
                                `,512),[[v,t.context]]),h(s("select",{class:"mt-4","onUpdate:modelValue":o[4]||(o[4]=e=>t.posttype=e),name:"posttype"},[q,(a(!0),l(u,null,m(t.items,e=>(a(),l("option",{key:e.postCatId,value:e.PostCatId},b(e.category),9,A))),128))],512),[[_,t.posttype]])]),d(C,{show:t.showModal,onClose:o[5]||(o[5]=e=>t.showModal=!1)},{default:n(()=>[j,I]),_:1},8,["show"])],32)])])]),_:1}))}});export{H as default};
